
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Palette - Upload new File</title>
</head>
<body>
    <h1>Upload new File</h1>
    <form method=post action="/upload" enctype=multipart/form-data>
        {{ form.hidden_tag() }}

        {{ form.upload }}
        {% for error in form.upload.errors %}
        <span style="color: red;">[{{ error }}]</span>
        {% endfor %}

        {{ form.submit() }}
    </form>


        {% if tints is not none %}

        <ul id="tints">

        </ul>
            <script>
                function componentToHex(c) {
                    var hex = c.toString(16);
                    return hex.length == 1 ? "0" + hex : hex;
                }

                function rgbToHex(r, g, b) {
                    return "#" + componentToHex(r) + componentToHex(g) + componentToHex(b);
                }

                const tints = [
                {% for tint in tints %}
                    [
                    {% for tint_value in tint %}
                        {{ tint_value}}
                        {{ "," if not loop.last }}
                    {% endfor %}
                    ]
                    {{ "," if not loop.last }}
                {% endfor %}
                ]

                let hex_colors = [];

                for(i = 0; i < tints.length; i++) {
                    hex_colors.push(rgbToHex(tints[i][0], tints[i][1], tints[i][2]))
                }

                const tints_list = document.getElementById('tints');

                for(color = 0; color < hex_colors.length; color++) {
                    const node = document.createElement("li");
                    const textnode = document.createTextNode(hex_colors[color]);
                    node.appendChild(textnode);
                    node.style.color = hex_colors[color];
                    tints_list.appendChild(node);
                }

            </script>
        {% endif %}

</body>
</html>
